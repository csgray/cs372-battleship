<html>
    <head>
        <meta charset="UTF-8"/>
        <title>CS372: Battleship!</title>
        <script src="phaser.min.js"></script>
    </head>
    <body>
    <script type="text/javascript">

        window.onload = function() {

            var game = new Phaser.Game(1280, 720, Phaser.AUTO, '', { preload: preload, create: create, update: update });

            function preload () {
                game.load.image('grid', './assets/grid2.png');
                game.load.image('carrier', './assets/carrier - 5.png');
                game.load.image('battleship', './assets/battleship - 4.png');
                game.load.image('cruiser', './assets/cruiser - 3.png');
                game.load.image('submarine', './assets/submarine - 3.png');
                game.load.image('destroyer', './assets/destroyer - 2.png');
                game.load.image('damage', './assets/x-graphic.png');
            }
            var sprite;

            function create () {
                //  To make the sprite move we need to enable Arcade Physics
                game.physics.startSystem(Phaser.Physics.ARCADE);

                targetText = game.add.text(90, 60, 'Target Grid', { fontSize: '36px', fill: '#FFF' });
                targetGrid = game.add.sprite(90, 112, 'grid');
                shipText = game.add.text(660, 60, 'Your Ships', { fontSize: '36px', fill: '#FFF' });
                shipGrid = game.add.sprite(660, 112, 'grid');
                damage = game.add.sprite(705,157, 'damage');
                game.input.onTap.add(onTap, this);

                
                ships =[carrier = game.add.sprite(705, 157, 'carrier'),
                        battleship = game.add.sprite(750, 157, 'battleship'),
                        cruiser = game.add.sprite(795, 157, 'cruiser'),
                        submarine = game.add.sprite(840, 157, 'submarine'),
                        destroyer = game.add.sprite(885, 157, 'destroyer')
                        ];

                shipBounds = new Phaser.Rectangle(705, 157, 450, 450);
                ships.forEach(function(element) {
                    element.inputEnabled = true;
                    element.input.enableDrag();
                    element.input.enableSnap(45,45,true,true, 30, 22);
                    element.input.boundsRect = shipBounds;
                });
            }

            function update () {
            }

            function onTap(pointer, doubleTap) {
                if(doubleTap){
                    carrier.angle+=90;
                    battleship.angle+=90;
                    cruiser.angle+=90;
                    submarine.angle+=90;
                    destroyer.angle+=90;
                }
            }
        }


    </script>
    </body>
</html>